<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta charset="utf-8">
  <!-- Favicon Stuff -->
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#322a77">
  <meta name="msapplication-TileColor" content="#322a77">
  <meta name="theme-color" content="#ffffff">
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">

  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF" crossorigin="anonymous"></script>

  <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"> -->

  <!-- Add icon library -->

  <script defer="defer" src="https://use.fontawesome.com/releases/v5.15.2/js/all.js"></script>
  <title>{{.Title}}</title>

</head>

<body>
  <nav class="navbar sticky-top navbar-light" style="background-color: #dfdfdf">
    <form action="/viewSrvEnvironment" method="POST" align="" class="btn-block">
      <a class="navbar-brand float-left"  href="#">
        <img src="../assets/android-chrome-192x192.png" class="img-fluid" alt="{{.Title}}" style="width: 1vw; min-width: 30px;"/>
        {{.Title}}</a>

      <div class="btn-group flex-wrap float-right">
        <button type="button" class="btn btn-primary" onclick="location.href='../'">
          <i class="fa fa-home" style="font-size: 18px" disabled="disabled"></i>
          Home</button>

        <button type="button" class="btn btn-primary" data-toggle="collapse" data-target="#servicesInfo">
          <i class="fas fa-microchip" style="font-size: 18px"></i>
          Services
          <span class="badge badge-light">{{.NoServices}}</span></button>

        <button type="button" class="btn btn-primary" data-toggle="collapse" data-target="#responses">
          <i class="fas fa-folder" style="font-size: 18px"></i>
          Responses
          <span class="badge badge-light">{{.NoResponses}}</span></button>

        <div class="btn-group" role="group">
          <button id="btnGroupDrop1" type="button" class="btn btn-info dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <i class="fas fa-sliders-h" style="font-size: 18px"></i>
            Settings
          </button>
          <div class="dropdown-menu" aria-labelledby="btnGroupDrop1">
            <a class="dropdown-item" href="#">
              <button type="button" class="btn btn-outline-link" data-toggle="collapse" data-target="#config">Configuration</button>
            </a>
            <a class="dropdown-item" href="#">
              <button type="submit" value="" class="btn btn-outline-link">Environment</button>
            </a>
            <a class="dropdown-item" href="/listSrvConfiguration">
              <button type="submit" value="" class="btn btn-outline-link" formaction="/listSrvConfiguration" method="POST">Server Configuration</button>
            </a>
            <a class="dropdown-item" href="/clearResponses">
              <button type="button" class="btn btn-outline-link text-warning" style="font-color:blue" onclick="location.href='/clearResponses'">Clear Responses</button>
            </a>
            <a class="dropdown-item" href="/clearQueues">
              <button type="submit" class="btn btn-outline-link text-danger" formaction="/clearQueues" method="POST">Clear Queues</button>
            </a>

          </div>
        </div>

        <button type="button" class="btn btn-secondary" onclick="window.print()">
          <i class="fa fa-print" style="font-size: 18px"></i>
          Print</button>

      </div>
    </form>
  </nav>

  <div class="container-fluid"><br>

    <div id="config" class="collapse">
      <div class="card">
        <div class="card-header font-weight-bold">Configuration<button type="button" class="close" aria-label="Close" data-toggle="collapse" data-target="#config">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="card-body">

          <label for="requestPath" class="label-bg">Request Path :</label>
          <input type="text" id="requestPath" name="requestPath" value="{{.RequestPath}}" disabled="disabled" size="60" class="form-control">
          <br>
          <label for="responsePath">Response Path :</label>
          <input type="text" id="responsePath" name="responsePath" value="{{.ResponsePath}}" disabled="disabled" size="60" class="form-control">
          <br>

          <label for="processedPath">Processed Path :</label>
          <input type="text" id="processedPath" name="processedPath" value="{{.ProcessedPath}}" disabled="disabled" size="60" class="form-control">
          <br>

          <label for="responseType">Response Type Required :</label>
          <input type="text" id="responseType" name="responseType" value="{{.ResponseType}}" disabled="disabled" size="60" class="form-control">

        </div>
      </div>
      <br>
    </div>

    <div id="responses" class="collapse">

      <div class="card">
        <div class="card-header font-weight-bold">Responses
          <button type="button" class="close float-right" aria-label="Close" data-toggle="collapse" data-target="#responses">
            <span aria-hidden="true">&times;</span>

        </div>
        <div class="card-body">
          <!-- <label for="noResponses">No. Responses :</label> <input type="number" id="noResponses" name="noResponses" value="{{.NoResponses}}" disabled size="4" class="form-control"> <br> -->
          <div class="well table-responsive">
            <table class="table table-striped table-hover">
              <thead class="thead-light">
                <tr>
                  <th class="text-center">ID</th>
                  <th class="text-right">Actions</th>
                </tr>
              </thead>
              <tbody>
                {{range .Responses}}
                  <tr>
                    <td class="align-middle">{{.ResponseID}}</td>
                    <td class="alight-right">

                      <form action="/viewResponse?uuid={{.ResponseID}}" method="POST" class="float-right">
                        <div class="btn-group">
                          <button type="submit" value="{{.ResponseID}}" class="btn btn-outline-info">
                            <i class="far fa-eye" style="font-size: 22px"></i>
                          </button>

                          <button type="submit" value="" class="btn btn-outline-danger" formaction="/deleteResponse?responseID={{.ResponseID}}" method="POST">
                            <i class="far fa-trash-alt" style="font-size: 22px"></i>
                          </button>
                        </div>
                      </form>

                    </td>
                  </tr>
                {{end}}
              </tbody>
            </table>

          </div>

        </div>
      </div>
      <br>
    </div>

    <div id="servicesInfo" class="collapse show">
      <div class="card">
        <div class="card-header">

          <div class="row">
            <div class="col-6 font-weight-bold form-control" style="border:0;background:000">
              Services
            </div>
            <div class="col-5">
              <input class="form-control" id="myInput" type="text" placeholder="Search...">
            </div>
            <div class="col">
              <button type="button" class="close float-right" aria-label="Close" data-toggle="collapse" data-target="#servicesInfo">
                <span aria-hidden="true">&times;</span>
              </div>
            </div>
          </div>

          <div class="card-body">
            <!-- <label for="noServices">No. Services Available :</label> <input type="number" id="noServices" name="noServices" value="{{.NoServices}}" disabled size="4" class="form-control"> <br> <label for="services">Services :</label>-->
            <div class="well table-responsive">
              <table class="table table-striped table-hover">
                <thead class="thead-light">
                  <tr>
                    <!-- <th class="text-center">ID</th> -->
                    <th>Description</th>
                    <th class="text-right">Actions</th>
                  </tr>
                </thead>
                <tbody id="myTable">
                  {{range .ServiceCatalog}}
                    <tr>
                      <!-- <td class="align-middle">{{.CatalogID}}</td> -->
                      <td class="align-middle">{{.Text}}</td>
                      <td class="align-middle">

                        <form action="/previewRequest?id={{.CatalogID}}" method="POST" class="float-right">
                          <div class="btn-group">

                            <button type="submit" value="{{.CatalogID}}" class="btn btn-outline-info">
                              <i class="far fa-eye" style="font-size: 22px"></i>
                            </button>

                            <button type="submit" value="{{.CatalogID}}" class="btn btn-outline-primary">
                              <i class="far fa-paper-plane" style="font-size: 22px" formaction="/executeRequest?id={{.CatalogID}}&uuid={{.UUID}}&action={{.Action}}&item={{.Item}}&parameters={{.Parameters}}" method="POST"></i>
                            </button>
                          </form>

                        </td>
                      </tr>
                    {{end}}
                  </tbody>
                </table>

              </div>

            </div>
          </div>
        </div>

      </div>

      <script>
        $(document).ready(function () {
          $("#myInput").on("keyup", function () {
            var value = $(this).val().toLowerCase();
            $("#myTable tr").filter(function () {
              $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
            });
          });
        });
      </script>

    </body>
